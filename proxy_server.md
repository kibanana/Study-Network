## Proxy Server(프록시 서버) 란?

자신을 통해서 다른 네트워크에 간접적으로 접속할 수 있도록 해주는 컴퓨터 혹은 프로그램 ⇒ 중개자

1. **보안** : 익명의 사용자가 서버에 직접 접근하는 것을 막는다.
2. **속도** : proxy 서버는 사용자의 요청을 cache 해서, 동일한 요청이 들어오면 cache의 자원을 반환한다. 이는 서비스의 속도를 높여준다.
3. **ACL(Access Control List)** : 사이트 접근에 대한 접근 정책을 정의할 수 있다.
4. **Log/Audit** : 회사내 직원의 인터넷 사용을 레포팅 할 수 있다. 반대로 인트라넷의 사용을 레포팅할 수도 있다.
5. **지역 네트워크의 제한을 우회** : 보안상의 이유로 80번 외에는 포트를 막아 놓는 경우가 있는데, 이러한 제한을 우회해서 원하는 다른 서비스를 이용할 수 있다.

### 종류

1. **Forward Proxy**

    일반적으로 사용하는 프록시 방식.

    프록시 서버는 클라이언트와 애플리케이션 서버 사이에 위치하고, 클라이언트가 타켓 서버인 애플리케이션에 서비스를 요청할 때 프록시 서버로 요청을 보내게 된다. 그러면 프록시 서버는 타겟 서버로 요청을 중계한다.

    ![proxy1](https://user-images.githubusercontent.com/37951612/77852497-f649c500-7219-11ea-8955-7716ae0323a9.png)

2. **Reverse Proxy**

    클라이언트는 Proxy Server 배후에 있는 타겟 서버의 URL(:12)이 아닌 Proxy Server의 URL로 요청한다.

    요청을 받은 Proxy Server는 URI에 매핑된 애플리케이션 서버로 중계를 한다. 그러므로 애플리케이션 서버는 외부로부터 감추어진다.

    애플리케이션 서버의 정보가 외부로부터 감추어질 뿐만 아니라, 분산 처리 시스템으로 만들 수 있다(Proxy Server가 요청을 분산하는 역할을 할 수 있기 때문)는 장점이 있다.

    ![proxy2](https://user-images.githubusercontent.com/37951612/77852499-f77af200-7219-11ea-9181-f62883b2698c.png)

3. **Open Proxy**

    모든 인터넷 사용자가 액세스할 수 있는 프록시 서버다. 수백에서 수천 정도의 오픈 프록시가 익명으로 운영되고 있는 것으로 알려져 있으며, 오픈 프록시를 이용하여 자신의 IP를 숨길 수 있다. 중국 같은 나라는 정치적인 이유로 외부 사이트 접근을 막는 경우가 있는데, 이 때 공개 프록시를 이용하면 외부 사이트에 접근 가능하다.

---

프록시 서버는 **클라이언트와 서버 사이에 위치하여 HTTP 메시지를 정리하는 중개자 역할**을 한다.

프록시 서버는 클라이언트에서 볼 때 서버처럼 동작하면서 요청 메시지를 받고 응답 메시지를 돌려준다. 서버에서 볼 때 클라이언트처럼 동작하면서 웹 요청 메시지를 보내고 응답 메시지를 받는다.

프록시는 서버이면서 동시에 클라이언트인 것이다.

**Why?**

프록시 서버는 실용적이고 유용하게 요청&응답할 수 있다면 무슨 일이든 한다. 보안을 개선하고, 성능을 높여주며, 비용을 절약한다.

**중개인처럼 동작하기 때문에 모든 HTTP 트래픽을 제어할 수 있다.**

- **어린이 필터**

    일반적으로 성인 콘텐츠 차단이라고 생각하면 된다.

    클라이언트와 서버 사이에 있는 중개인으로써 부적절한 사이트의 접근을 강제로 거부할 수 있다.

- **문서 접근 제어자**

    프록시 서버는 많은 웹 서버들과 웹 리소스에 대한 단일한 접근 제어 전략을 구현하고 감사 추적을 하기 위해 사용될 수 있다.

    이것은 대기업 환경이나 분산된 관료 조직에서 유용하다.

    각기 다른 조직에서 관리되는 다양한 종류의 수많은 웹 서버들에 대한 접근 제어를 수시로 갱신할 필요 없이, 중앙 프록시 서버에서 접근 제어를 설정할 수 있다.

    이 경우 똑똑한 사용자들은 고의적으로 제어 프록시를 피해갈 수 있기에, **서버가 고정적으로 프록시 서버로부터의 요청만 받아들이도록 설정**할 수 있다.

- **웹 캐시**

    **프록시 캐시**는 인기 있는 문서의 로컬 사본을 관리하고 해당 문서에 대한 요청이 오면 빠르게 제공한다.

    이것이 일반적으로 알려져 있는 CDN 서버로 활용할 수 있다.

    프록시 서버의 예로 CDN 서버를 들 수 있다.

    자세한 건 CDN에 대해 본인이 다룬 글이 있으니 참고하길 바란다. **[CDN vs Cache](http://mygumi.tistory.com/67)**

- **대리 프록시**

    일반적으로 **리버스 프록시**라고 불린다.

    사용자들은 서버에 요청을 하면 리버스 프록시 서버가 요청을 받는다.

    그렇기에, 사용자에게는 리버스 프록시 서버가 단순히 웹 서버로 생각한다. (사용자는 웹 서버의 정보를 알지 못한다)

    하지만 리버스 프록시는 웹 서버나 다른 프록시 서버와 요청하게 된다.

    그렇기에 **부하 경감을 위한 분산 네트워크(로드 밸런싱)와 웹 서버의 보안**을 위해 사용된다.

    **포워드 프록시와 리버스 프록시를 비교**하자면, **사용자가 실서버의 정보를 알고 있는지에 대한 여부**이다.

    포워드 프록시는 클라이언트에서 요청 시 실 서버의 주소를 프록시 서버에 전달하여 프록시 서버가 실 서버에 요청하여 데이터를 가져온다.

    리버스 프록시는 클라이언트에서 요청 시 리버스 프록시 서버가 요청을 받아 배후의 서버에 데이터를 가져온다.

    * 리버스는 거꾸로라는 뜻이 아닌 배후의 뜻으로 해석하면 이해하기 쉬울 것이다.

- **콘텐츠 라우터**

    **인터넷 트래픽 조건과 콘텐츠의 종류에 따라 요청을 특정 웹 서버로 유도하는 콘텐츠 라우터로 동작**할 수 있다.

    예를 들어 CDN을 생각하면 된다.

    CDN 서버 제공자는 사용자가 조금 더 높은 성능을 위해 돈을 더 지불했다면 조금 더 가까운 CDN 사용할 수 있게 할 수 있다.

- **트랜스코더**

    콘텐츠를 클라이언트에게 전달하기 전에 **본문 포맷을 수정**할 수 있다.

    이와 같이 데이터의 표현 방식을 자연스럽게 변환하는 것을 **트랜스코딩이라고 부른다. (무손실 압축)**

    중개자에 의한 콘텐츠의 변형이라는 의미로 볼 수 있다.

    예를 들어 GIF 이미지를 JPG 이미지로 변환 할 수 있고, 크기, 강도, 압축 등 변환할 수 있다.

- **익명화 프록시**

    **HTTP 메시지에서 신원을 식별할 수 있는 특성**들(IP, From 헤더, Referer 헤더, 쿠키 등)을 **제거**함으로써 개인 정보 보호와 익명성 보장에 기여한다.
