# 서브넷 (Subnet)

**서브넷(Subnet)** 은 **하나의 네트워크가 분할되어 나눠진 작은 네트워크** 로, **(자원을 효율적으로 분배하기 위해 네트워크 영역과 호스트 영역으로)네트워크를 분할**하는 것을 **서브네팅(Subnetting)** 이라고 한다. 그리고 이 서브네팅은 **서브넷마스크(Subnet Mask)** 를 통해 수행될 수 있다. 서브넷마스크로 서브넷이 신경써야 하는 IP 범위를 제외하고는 전부 가리는 것이다.

> 네트워크적인 측면에서 말하자면, 너무 큰 브로드캐스트 도메인은 네트워크 환경에서 패킷전송을 느리게하고 성능저하를 발생시킵니다. 따라서 네트워크를 쪼개서 통신 성능을 보장하는 것입니다. 또한 IP는 32자리 2진수로 표현할 수 있는데 이 말은 결국 최대 2의 32승만큼의 표현만 가능하다는 뜻 입니다. 즉, 자원의 한계가 존재한다는 뜻이고 결국 제한적인 자원으로 인해 주소에 낭비 없이 아껴써야 합니다. 그래서 등장하는 것이 서브넷마스크라는 녀석입니다. 서브넷 마스크는 필요한 네트워크 주소만 호스트 IP로 할당 할 수 있게 만들어 네트워크 낭비를 방지합니다. 이를 전문용어로 서브네팅이라 하며 그 반대는 슈퍼네팅이라고 합니다.

> 네트워크 내에서 호스트 IP는 중복되지 않아야 한다(각자 달라야 한다).

> 네트워크 주소 (Network Address)   
  라우터를 거치지 않고 내부적으로 통신이 가능한 영역, 브로드캐스트가 적용되는 영역을 말한다. 모든 호스트를 관리하기 힘들기에 범위를 지정하여 보다 쉽게 호스트의 집합을 관리하도록 하는 것이다.

> 호스트 주소 (Host Address)  
  호스트는 단말기라는 말로 대체될 수 있다. 즉, 호스트 주소는 특정한 네트워크 내에서 서로를 구분하기 위한 주소다. 

> IP 주소  
  라우팅으로 목적지를 알아내고 찾아갈 때에는 `Network Address + Host Address` 가 합쳐진 IP주소를 보게 된다.

## 탄생배경
네트워크를 클래스 단위로 분류하면 적절한 네트워크 크기를 갖기 어렵다. 따라서 서브넷으로 분할하여 사용한다.

더 자세히 설명하자면, 어떤 기업에서 적은 양의 호스트 주소가 필요한데, B Class 네트워크를 할당받아서 IP 주소에 여유가 생기고, 어떤 기업에서는 많은 양의 호스트 주소가 필요한데 C Class 네트워크를 할당받아서 IP 주소가 부족할 수 있다.

따라서 클래스로만 네트워크를 분류하는 것은 비효율적이라는 결론이 났고, 좀 더 **적절한 단위로 네트워크를 분할*해야할 필요성** 이 생겼다.

## 서브넷마스크 (Subnet Mask)

> 설명의 편의를 위해 2진수 표현

- `11001101 00000000 00000001 xxxxxxxx` : 최상위 비트가 11이므로 C Class 네트워크(앞 24bit => 네트워크 주소, 뒤 8bit => 호스트 주소, 기본 서브넷 마스크 `/24`)

즉 서브넷 마스크는 **네트워크 주소를 나타내는 비트 수를 명시한 값** 이다.

- 위의 IP는 C Class 네트워크이며, 이 네트워크가 가질 수 있는 호스트 주소 수는 256개이며, 해당 네트워크를 호스트 주소를 128개씩 가지는 두 개의 네트워크로 분할하고 싶을 때 서브넷으로 분할한다.  
  `11001101 00000000 00000001 1xxxxxxx`  
  `11001101 00000000 00000001 0xxxxxxx`

- 위와 같이 네트워크를 분할하고 싶다면, 네트워크 주소를 나타내는 부분이 25자리가 된다. 이런 서브넷 마스크는 `/25` 라고 표현할 수 있다. 만약 서브넷 마스크를 변경하여 네 개의 서브넷으로 분할하고 싶다면? 한 자리를 더 네트워크 주소로 쓰면 된다.
- 하지만 분할을 많이 할수록 하나의 서브넷에서 가질 수 있는 호스트 주소가 줄어들게 되니까 로컬 네트워크 규모에 따라 서브넷 마스크 값을 잘 조정해야 한다.

## 서브넷 마스크를 이용하여 서브넷 구별하기

`205.0.1.129`

↑ IP 주소

서브넷 마스크의 형태와 IP 주소의 형태는 비슷하다. 하지만 명백하게 서브넷 마스크와 IP는 다르다.  
서브넷 마스크는 단지 **현재 내가 속한 네트워크가 어디까지 네트워크 주소를 표현하는지 명시** 하는 값이다.

↓ 서브넷 마스크

`255.255.255.128`

`11111111 11111111 11111111 10000000`

위의 서브넷 마스크 값은 최상위 `25bit`가 네트워크 주소라는 것을 나타낸다. 또한 2진수로 표기된 서브넷 마스크 값은 무조건 1이 연속적으로 나와야 한다.

네트워크에 속한 호스트의 IP 주소 범위는 `205.0.1.129 ~ 205.0.1.255` 라는 것을 알 수 있으며, 이는 **`205.0.1.129/25`** 로 간소화하여 표현할 수 있다.

내 컴퓨터의 서브넷마스크는 `ipconfig` 로 확인할 수 있으며 만약 서브넷 마스크 값이 `255.255.255.0`라면 서브네팅 되지 않는 C Class 네트워크에 속했다는 것을 알 수 있다. 이와 같이 기본 서브넷마스크로 쪼개진 네트워크 주소를 서브넷 네트워크라고 한다. 

![image](https://user-images.githubusercontent.com/37951612/78132382-9a6c7f80-7457-11ea-961c-2fd5a0603bce.png)

## 서브넷이 필요한 이유

이런 기술은 결국 각 클래스로 나눠진 네트워크를, 운영 중인 서비스의 규모에 맞게 분할하여 사용하기 위함이다. 따라서 **낭비되는 IP 주소 자원을 최소화** 하는 것이 주된 목적이다.

또는 브로드 캐스팅을 이용할 때다. 특정 네트워크에 연결된 모든 기기에 하나의 메시지로 동시에 데이터로 보낼 때 연결된 호스트 디바이스가 많다면, 당연히 성능의 저하가 올 수 밖에 없다. 이 때 네트워크의 규모를 줄여서 브로드 캐스팅으로 인한 부하를 줄일 수 있다.
