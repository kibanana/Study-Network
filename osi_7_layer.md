## OSI 7계층
개방형 시스템 상호연결(OSI, Open System Interconnection) 모델  
네트워크에는 여러 시스템이 혼재되어 있다. 데이터 전송 시 표준이 정해지지 않으면 데이터의 무결성을 보장할 수 없다. 
그래서 ISO(국제 표준화 기구)에서 네트워크 전송 시 데이터 표준을 위해 정립한 것이 OSI 7계층이다. 
7계층에서 1계층으로 내려가면서 각 계층에서 정해진 정보를 조합하여 네트워크를 통해 전송하고, 
데이터를 받는 호스트에서는 반대로 1계층에서 7계층으로 헤더 정보를 참조하여 데이터를 얻는다.

하지만 이 OSI 7계층은 이론적인 표준일 뿐, 실제 네트워크에서는 7계층을 정확하게 분리해서 사용하지 않는다. 
실제로 가장 많이 사용되는 계층은 TCP/IP 4계층이다.

각 계층의 정보가 아래 단계로 가면 그 정보가 데이터가 되고, 해당 단계의 헤더 정보가 붙고, 이것이 반복되며 최종 데이터가 된다. 
예를 들면, 실제로 인터넷에서 데이터 전송 시 3계층의 헤더에 들어간 IP 정보 
=> 3단계 장비인 라우터에서 3단계 헤더 정보를 참조하여 라우팅 테이블에 등록된 라우팅 정보를 통해 해당 호스트 쪽으로 전송된다. 
=> 아래 단계인 2(MAC 주소), 1단계가 갱신된다.

7계층 중 상위 7,6,5 계층은 **응용 프로그램에 의해 구성**된다.  
4,3(=> 주로 **OS**가 구성), 2(=> **네트워크 디바이스 드라이버**가 구성) 계층은 **시스템 프로그램에 의해 구성**된다.  
1계층은 실제 **물리적인 장치**에 의해 전달된다.

응용 프로그램 구현 시 시스템 프로그램 단계로 진입하는 시스템 콜인 소켓 처리 함수를 사용한다(=> 소켓 프로그래밍). 
그리고 계층별로 생성된 헤더 정보를 참조하면 패킷 분석도 가능하다.

자신의 분야가 어느 계층에 속하는지 알고 그 계층에서 어떻게 다음으로 데이터를 넘길 것인지가 중요하다.  
**네트워크 통신 과정을 7단계로 나누었기 때문에** 통신이 일어나는 과정을 단계별로 파악할 수 있고, 문제가 생기면 해당 계층만 고치면 된다는 장점이 있다.

- **응용 계층(Application Layer)**
  
  `HTTP, SMTP, FTP, Telnet, POP3`  
  - **응용 프로세스 네트워크에 연결하여 자료를 송수신할 수 있는 인터페이스를 제공하는 계층**  
  - 웹 브라우저와 같은, 네트워크를 사용하는 프로그램이다. 사용자와 직접적으로 상호작용한다. ex) 웹 서버와 연결되거나 이메일을 송수신해주는 역할
  
- **표현 계층(Presentation Layer)**
  
  **네트워크 통신을 하는 시스템 사이의 데이터 표현 차이를 해결(=> 호환)하기 위해 자료의 형식(format)을 변환하거나, 공통의 형식(format)을 제공하는 계층**  
  - 인코딩(언어 코드 형식, ex. `ASCII, BCD, EBCDIC`) 변환, 그래픽, 영상 정보 등 호환을 위해 `JPEG`, `MPEG`, `TIFF`, `GIF`(그래픽 포맷), `QUICKTIME`(동영상 포맷), `MIDI`(음악 포맷), `RTF`, `ASCII`, `EBCDIC`(텍스트 포맷) 등으로 변환,
  네트워크 보안을 위한 **암호화(Encryption) 전송**, **복호화(Decryption) 수신** 등 **데이터의 압축(Compression)과 해제(Decompression)**

- **세션 계층(Session Layer)**

  - **통신을 위해서는 세션(Session)을 만들어야 하는데 이 작업이 세션 계층에서 처리된다.**  
  - **네트워크 연결의 성립(Establishment) 및 제어와 운영(Manage & Control), 종료(Terminate)를 수행하는 계층**  
  - 응용 계층에서 나온 **데이터의 순서를 결정**하여 아래 계층인 전송 계층으로 전송한다.  
  - 송신자와 수신자 간 통신을 위해 동기화 신호를 주고받아야 한다.   

- **전송 계층(Transport Layer)**

  `TCP(연결 지향 프로토콜, Connection Oriented Protocol), UDP(비연결 지향 프로토콜, Connectionless Protocol)`  
  TCP는 IP 위에 구축되어 TCP/IP로 합쳐 부른다. 자료가 잘 전송되고 있는지 확인하고, 만약 중간에 에러가 발생하면 재전송한다. 반면 UDP는 자료를 보낸 후 아무것도 하지 않는다.  
  자료 단위: 세그먼트(Segment)  
  - **통신하는 컴퓨터 간에 자료를 전송하는 계층**  
  - 송신측은 전송할 데이터를 패킷(TCP / UDP Header + Data)으로 **분할**하고, 
  수신측은 분할되어서 전송된 패킷을 다시 **조합**하여 본래의 순수 데이터로 만들어서 상위 계층으로 전달한다.

- **네트워크 계층(Network Layer)**
  
  `IP(Internet Protocol)`, `ARP, RARP, ICMP`, 라우터(Router)  
  자료 단위: 패킷(Packet)  
  - 라우팅 프로토콜을 이용하여 **최적의 전송 경로(목적지까지 가장 안전하고 빠른 길)를 선택하고, 이 경로를 통해 자료를 전송하는 계층**  
  - IP 주소와 같은 논리 주소 체계, 지리적으로 떨어진 네트워크 상의 두 호스트가 정확하게 최종 목적지로 연결되도록 연결성을 제공한다.  
  - 에러는 상위 계층에서 해결하기 때문에 에러가 발생하든 말든 일단 보내는 것에 중점을 둔다.  
  주요 정보: 프로그램을 구분하는 데 사용되는 **포트 번호**, TCP 헤더의 경우 ACK, SEQ 값

- **데이터 링크 계층(Data Link layer)**

  스위치(Switch), 브릿지(Bridge)  
  `HDLC, PPP, Frame-Relay, FDDI, ATM`
  자료 단위: 프레임(Frame, 비트 단위의 논리 자료)  
  - **물리적인 전송 링크를 통해 자료를 안전하게 전송하는 계층**  
  - 물리 주소인 `MAC 주소`를 사용하여 인접한 시스템까지 자료를 안전하게 전송하여 최종 목적지까지 전송되도록 해준다.  
  - Data의 (직접 연결된 노드 간)물리적인 전송, 에러 검출(Error Notification), 흐름 제어(Flow Control)를 다룬다. Data 전송 시 에러가 발생하면 Data Link Layer에서 검출하고 Transport Layer에서 그 에러를 수정한다.  
  - Sublayer MAC, LLC로 나뉜다. **MAC**은 MAC Address를 이용하여 Data를 해당 장비로 보내는 것, **LLC**는 각 장비를 논리적으로 연결하고 유지한다.
  
- **물리 계층(Physical Layer)**

  리피터(Repeater, 신호 증폭기. 거리가 멀 때 신호를 증폭하기 위해 사용), 케이블(Cable), 허브(Hub)  
  - **서로 연결하는 물리적인 링크의 활성화/비활성화, 링크 상태를 유지하기 위한 물리적 링크의 전기적, 기계적, 규약적 명세를 정의하는 계층**  
  - Data를 전기신호(Bit)로 바꾸는 역할을 한다.  
  - 네트워크에 문제가 발생하면 물리 계층 문제인 경우가 많으므로 케이블 연결 상태, 장비의 전원부터 확인하는 것이 좋다.

> Hub(Dummy Hub)  
OSI 1(물리) 계층 장비로, 포트에 전기 신호가 도착하면 신호가 들어온 포트를 제외한 모든 포트에 신호를 전달하는 역할을 한다. 각자의 터미널이 그 신호를 받아들일것인지 결정한다.  
버퍼나 CPU가 없고, 1/n의 속도이다. 값이 싸며, 충동 도메인이 분리가 안 되기 때문에 여러 명이 동시 사용 시 느려진다.

> Switch  
OSI 2(데이터 링크) 계층 장비로, Hub와 비슷하게 포트에 들어온 신호를 다른 포트에 전송하지만 프레임을 필터링한다는 것이 다르다.  
MAC Address를 이용하여 데이터를 보내고자 하는 포트에만 신호를 전달한다.  
CPU와 버퍼가 있어서 MAC 주소를 보고 지정된 노드로만 데이터를 보낸다. 여러 명이 동시 사용해도 느려지지 않는다.

> Bridge  
OSI 2(데이터 링크) 계층 장비로, 두 개의 세그먼트를 연결하고 패킷을 전송한다.  
Switch가 하드웨어 기반, Bridge는 소프트웨어 기반으로 속도가 느린 편이다. Bridge는 포트 수가 최대 16개지만, Switch는 백여개까지 가질 수 있다.

> Gateway  
네트워크 상에서 특정 노드에서 어디로 전송해야 할지를 나타낸다. Router, Switch 등의 장비가 될 수 있으며, `Node => Gateway => Router => (Routing to Other Destination)` 순서로 진행된다(단위는 Packet).

> Router  
OSI 3(네트워크) 계층 장비로, Switch와 Bridge, Hub를 통해 LAN 구성 후 외부와 연결하기 위해 필요한 장비다. IP를 이용하여 한 네트워크에서 다른 네트워크로 패킷을 전달하기 위해 사용한다. 충돌도메인과 브로드캐스트 도메인을 분리한다.

## TCP/IP 4계층

![image](https://user-images.githubusercontent.com/37951612/77894308-10ce7d80-72b0-11ea-95a6-b8746e3ec25c.png)

![image](https://user-images.githubusercontent.com/37951612/77893090-76ba0580-72ae-11ea-81d9-603df8a9e11a.png)

- 응용 계층 (Application Layer)

  OSI 7계층의 5(세션), 6(표현), 7(응용) 계층에 해당하며 `HTTP, Telnet, FTP, SMTP` 프로토콜을 사용하여 TCP/UDP 기반의 응용 프로그램을 구분
  
- 전송 계층 (Transport Layer)

  통신 노드 간의 연결을 제어하고, 자료의 송수신을 담당하는 계층  
  `TCP`: 스트림 형식의 연결 지향 프로토콜, `UDP`: 데이터그램 형식의 비연결형 프로토콜
  
- 인터넷 계층 (Internet Layer)

  OSI 7계층의 3(네트워크) 계층에 해당하며, 통신 노드간의 IP 패킷을 전송하는 기능과 라우팅 기능을 담당하는 계층  
  `IP`: 데이터그램 방식의 비연결형 프로토콜
  
- 네트워크 액세스 계층 (Network Access Layer)

  OSI 계층의 2(데이터 링크), 1(물리) 계층에 해당한다. `CSMA/CD, MAC 프로토콜, LAN, X.25, 패킷망, 위성 통신, 아이얼 업 모뎀` 등
